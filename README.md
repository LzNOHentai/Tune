
# Tune.sh
## 功能概述

此脚本包含以下功能：
- **流量限制**：设置月带宽使用上限，并在达到限制时自动关闭系统。
- **DDoS自动关机**：检测到DDoS攻击或流量异常时，自动关闭服务器以保护系统。
- **SSH安全设定**：更改SSH登录设定，减少SSH爆破风险。
- **系统参数调整**：调整系统内核参数以优化性能。
- **BBRx和BBRv3安装**：安装BBRx或BBRv3来优化网络性能。

## 使用方法

使用此脚本前，请确保您具有root权限。脚本的使用方式如下：

```bash
bash <(wget -qO- https://raw.githubusercontent.com/jerry048/Tune/main/tune.sh) [选项]
```

其中 `[选项]` 可以是以下几种：

- `-b`：设置每月流量上限。
- `-d`：DDoS自动关机。
- `-s`：SSH安全设定。
- `-t`：调整系统参数以优化性能。
- `-x`：安装BBRx。
- `-3`：安装BBRv3。
- `-h`：显示帮助信息。

## 各功能详细说明
### 带宽限制 (`bandwidth_limit_`)
设置每月的带宽使用上限（以GB为单位）。当达到设定的上限时，系统将自动关闭以避免额外的带宽费用。

### DDoS 防护自动关闭 (`ddos_shutdown_`)
如果连续 10 分钟检测到 DDoS 攻击或流量异常，自动关闭服务器以保护系统。

### SSH安全设置 (`ssh_secure_`)
更改SSH端口和禁用密码登录，增加SSH登录的安全性。
-   在禁用原端口和密码登录前会允许用户测试是否能用新设定登录。如果用户无法登录，脚本不会对设定进行更改。

### 系统参数调整 (`tune_`)
调整系统内核参数，包括文件打开限制、缓冲区大小、TCP队列长度等，以提高系统性能。

### BBRx安装 (`install_bbrx_`)
安装BBRx，这是一个魔改bbr，可以提高网络传输速度。

### BBRv3安装 (`install_bbrv3_`)
安装BBRv3，相比普通bbr，能减少掉包

## 注意事项

- 在使用脚本前请确保您具有root用户权限。
- 在执行SSH安全设置时，请仔细跟随指示操作，以避免不必要的服务中断。
- 系统参数调整可能需要根据具体的系统配置和需求进行微调。

最后，请在使用此脚本前备份重要数据，以防万一出现不可预见的问题。
