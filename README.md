
# 系统优化脚本使用指南
## 功能概述

此脚本包含以下功能：
- **带宽限制**：设置月带宽使用上限，并在达到限制时自动关闭系统。
- **SSH安全设置**：优化SSH登录设置，提高系统安全性。
- **系统参数调整**：调整系统内核参数以优化性能。
- **BBRx和BBRv3安装**：安装BBRx或BBRv3来优化网络性能。

## 使用方法

使用此脚本前，请确保您具有root权限。脚本的使用方式如下：

```bash
bash <(wget -qO- https://raw.githubusercontent.com/jerry048/Tune/main/tune.sh) [选项]
```

其中 `[选项]` 可以是以下几种：

- `-b`：设置每月带宽使用上限。
- `-d`：DDoS自动关机
- `-s`：进行SSH安全配置。
- `-t`：调整系统参数以优化性能。
- `-x`：安装BBRx以优化网络性能。
- `-3`：安装BBRv3以进一步优化网络性能。
- `-h`：显示帮助信息。

## 各功能模块详细说明
### 带宽限制 (`bandwidth_limit_`)
此模块允许用户设置每月的带宽使用上限（以GB为单位）。当达到设定的上限时，系统将自动关闭以避免额外的带宽费用。

### DDoS 防护自动关闭 (`ddos_shutdown_`)
如果连续 10 分钟检测到 DDoS 攻击或流量异常超出预设的字节或包限制时，自动关闭服务器以保护系统。

### SSH安全设置 (`ssh_secure_`)
通过更改SSH端口和禁用密码登录，增加SSH登录的安全性。
1. 更改SSH端口： 用户需要输入新的SSH端口，并在更改后测试是否能够通过新端口成功登录。
2. 禁用基于密码的Root登录: 脚本检查确认SSH密钥是否存在，并在更改后测试是否能通过SSH密钥成功登录。
-   如果用户无法登录，脚本不会进行更改。

### 系统参数调整 (`tune_`)
调整系统内核参数，包括文件打开限制、缓冲区大小、TCP队列长度等，以提高系统性能。

### BBRx安装 (`install_bbrx_`)
安装BBRx，这是一个魔改bbr，可以提高网络传输速度。

### BBRv3安装 (`install_bbrv3_`)
安装BBRv3，相比普通bbr，能减少掉包

## 注意事项

- 在使用脚本前请确保您具有root用户权限。
- 在执行SSH安全设置时，请仔细跟随指示操作，以避免不必要的服务中断。
- 系统参数调整可能需要根据具体的系统配置和需求进行微调。
- 安装BBRx和BBRv3之前，请确保您的系统支持这些工具。

最后，请在使用此脚本前备份重要数据，以防万一出现不可预见的问题。
